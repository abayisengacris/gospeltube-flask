<!DOCTYPE html>
<html>
<head>
    <title>Manage Categories</title>
</head>
<body>

<h1>Manage Categories</h1>

<!-- ADD CATEGORY -->
 
<h2>Add New Category</h2>
<form method="POST" action="{{ url_for('manage_categories') }}">
    <label>Category name</label>
    <input type="text" name="name" required>

    <label>Parent Category (optional)</label>
    <select name="parent_id">
        <option value="">-- No Parent --</option>
        {% for cat in categories %}
            <option value="{{ cat.id }}">{{ cat.name }}</option>
        {% endfor %}
    </select>
    <button type="submit">Add Category</button>

</form>
<!-- LIST CATEGORIES -->
<h2>Existing Categories</h2>

<table border="1" cellpadding="5">
<tr>
    <th>Name</th>
    <th>Parent</th>
    <th>Actions</th>
</tr>

{% for cat in categories %}
<tr>
    <td>{{ cat.name }}</td>
    <td>{{ cat.parent.name if cat.parent else "None" }}</td>
    <td>

        <!-- EDIT -->
        <a href="{{ url_for('edit_category', id=cat.id) }}">Edit</a>

        <!-- DELETE -->
        <form method="POST"
              action="{{ url_for('delete_category', id=cat.id) }}"
              style="display:inline;"
              onsubmit="return confirm('Delete this category?');">
            <button type="submit">Delete</button>
        </form>

    </td>
</tr>
{% endfor %}
</table>

</body>
</html>
